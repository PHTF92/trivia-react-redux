(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{119:function(e,t,n){},123:function(e,t,n){e.exports=n(246)},133:function(e,t,n){},140:function(e,t){},142:function(e,t){},154:function(e,t){},156:function(e,t){},183:function(e,t){},185:function(e,t){},186:function(e,t){},192:function(e,t){},194:function(e,t){},212:function(e,t){},215:function(e,t){},231:function(e,t){},234:function(e,t){},237:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){},244:function(e,t,n){},245:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n(51),i=n.n(o),s=n(27),u=n(121),l=n(33),m=n(7),d=n(20),f=n.n(d),p=n(34),h=function(){return fetch("".concat("https://opentdb.com","/api_token.php?command=request")).then((function(e){return e.json()})).then((function(e){return localStorage.setItem("token",e.token)}))},g=function(){var e=Object(p.a)(f.a.mark((function e(){var t,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://opentdb.com","/api_category.php"));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function v(e,t,n,a){return function(r){return r({type:"REQUEST_QUESTIONS"}),function(e,t,n,a){return fetch("".concat("https://opentdb.com","/api.php?amount=5").concat(a).concat(e).concat(t).concat(n)).then((function(e){return e.json().then((function(t){return e.ok?Promise.resolve(t):Promise.reject(t)}))}))}(e,t,n,a).then((function(e){return r({type:"RECEIVE_Q_SUCCESS",results:(t=e).results,responseCode:t.response_code});var t}),(function(e){return r(function(e){return{type:"RECEIVE_Q_FAILURE",error:e}}(e.message))}))}}var E=function(e){return{type:"CHANGE_SCORE",value:e}},b={name:"",email:""},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_INPUT":return Object(m.a)(Object(m.a)({},e),{},Object(l.a)({},t.name,t.value));default:return e}},N={categorie:"",difficulty:"",type:""},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SELECTORS":return Object(m.a)(Object(m.a)({},e),{},Object(l.a)({},t.name,t.value));default:return e}},O={isFetching:!1,results:""},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0,n=t.results,a=t.responseCode;switch(t.type){case"REQUEST_QUESTIONS":return Object(m.a)(Object(m.a)({},e),{},{isFetching:!0});case"RECEIVE_Q_SUCCESS":return Object(m.a)(Object(m.a)({},e),{},{isFetching:!1,results:n,responseCode:a});case"RECEIVE_Q_FAILURE":return Object(m.a)(Object(m.a)({},e),{},{error:t.error,isFetching:!1});default:return e}},C={score:0},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_SCORE":return Object(m.a)(Object(m.a)({},e),{},{score:e.score+t.value});default:return e}},w=Object(s.c)({inputChanges:y,selectorsChange:k,questionsReducer:S,scoreChangeReducer:j}),I=Object(s.d)(w,Object(s.a)(u.a)),_=(n(133),n(23)),x=n(18),R=n(25),A=n(24),F=n(6),q=n(4),J=n(122),T=n.n(J),Q=function(e){var t=T()(e.toLowerCase().trim());return"".concat("https://www.gravatar.com/avatar/").concat(t,"?d=").concat("https://www.gravatar.com/avatar/2d3bf5b67282f5f466e503d7022abcf3")},H=(n(237),function(){return r.a.createElement(F.c,{to:"/settings"},r.a.createElement("button",{"data-testid":"config-button",className:"config-btn"},r.a.createElement("span",{className:"pra-cego-ver"},"Configura\xe7\xf5es")))});n(239);function U(){return(U=Object(p.a)(f.a.mark((function e(t,n){var a,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Q(n),r={player:{name:t,assertions:0,score:0,gravatarEmail:n,picture:a}},localStorage.setItem("state",JSON.stringify(r)),e.next=5,h();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G=function(e,t){var n=e.target,a=n.name;t(n.value,a)},P=function(e,t){return""===e||""===t},V=Object(c.b)((function(e){var t=e.handleInputChange,n=e.inputChanges;return{name:n.name,email:n.email,handleInputChange:t}}),(function(e){return{handleInputChange:function(t,n){return e(function(e,t){return{type:"CHANGE_INPUT",value:e,name:t}}(t,n))}}}))((function(e){var t=e.name,n=e.email,a=e.handleInputChange;return r.a.createElement("div",null,r.a.createElement("div",{className:"container-config-btn"},r.a.createElement(H,null)),r.a.createElement("div",{className:"home-container"},r.a.createElement("label",{className:"home-text",htmlFor:"email"},"Email do Gravatar:"),r.a.createElement("input",{className:"home-inputs-and-btn",value:n||"",id:"email",onChange:function(e){return G(e,a)},name:"email",type:"text","data-testid":"input-gravatar-email"}),r.a.createElement("label",{className:"home-text",htmlFor:"name"},"Nome do jogador:"),r.a.createElement("input",{className:"home-inputs-and-btn",value:t||"",id:"name",onChange:function(e){return G(e,a)},name:"name",type:"text","data-testid":"input-player-name"}),r.a.createElement(F.c,{to:"/game"},r.a.createElement("button",{className:"home-inputs-and-btn home-btn-play",disabled:P(t,n),onClick:function(){return function(e,t){return U.apply(this,arguments)}(t,n)},"data-testid":"btn-play"},"JOGAR!"))))})),B=function(){return r.a.createElement("div",null,r.a.createElement(V,null))},L=n(44),M=(n(240),function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={categories:""},a}return Object(x.a)(n,null,[{key:"typeSelector",value:function(e,t){return r.a.createElement("div",null,r.a.createElement("label",{className:"settings-label",htmlFor:"type"},"Tipo"),r.a.createElement("select",{className:"settings-input","data-testid":"question-type-dropdown",value:t,name:"type",onChange:function(t){return n.handleChange(t,e)}},r.a.createElement("option",{value:""},"Escolha um tipo"),r.a.createElement("option",{value:"boolean"},"V ou F"),r.a.createElement("option",{value:"multiple"},"M\xfaltipla Escolha")))}},{key:"difficultySelector",value:function(e,t){return r.a.createElement("div",null,r.a.createElement("label",{className:"settings-label",htmlFor:"difficulty"},"Dificuldade"),r.a.createElement("select",{className:"settings-input","data-testid":"question-difficulty-dropdown",value:t,name:"difficulty",onChange:function(t){return n.handleChange(t,e)}},r.a.createElement("option",{value:""},"Escolha a dificuldade"),r.a.createElement("option",{value:"easy"},"Easy"),r.a.createElement("option",{value:"medium"},"Medium"),r.a.createElement("option",{value:"hard"},"Hard")))}},{key:"handleChange",value:function(e,t){var n=e.target,a=n.name;t(n.value,a)}}]),Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=this;g().then((function(t){e.setState({categories:Object(L.a)(t.trivia_categories)})}))}},{key:"categorieSelector",value:function(e,t){var a=this.state.categories||[];return r.a.createElement("div",null,r.a.createElement("label",{className:"settings-label",htmlFor:"categorie"},"Categoria"),r.a.createElement("select",{className:"settings-input","data-testid":"question-category-dropdown",value:t,name:"categorie",onChange:function(t){return n.handleChange(t,e)}},r.a.createElement("option",{value:""},"Escolha uma categoria"),a.map((function(e){var t=e.name,n=e.id;return r.a.createElement("option",{"data-testid":"category-option-".concat(n),key:t,value:n},t)}))))}},{key:"render",value:function(){var e=this.props,t=e.handleSelectorChange,a=e.categorie,c=e.difficulty,o=e.type;return r.a.createElement("div",{className:"settings-container"},r.a.createElement("p",{className:"settings-title"},"Configura\xe7\xf5es"),r.a.createElement("div",null,r.a.createElement("div",null,this.categorieSelector(t,a),n.difficultySelector(t,c),n.typeSelector(t,o),r.a.createElement(F.c,{to:"/"},r.a.createElement("button",{className:"settings-btn"},"Voltar")))))}}]),n}(a.Component)),D=Object(c.b)((function(e){var t=e.selectorsChange;return{categorie:t.categorie,difficulty:t.difficulty,type:t.type}}),(function(e){return{handleSelectorChange:function(t,n){return e(function(e,t){return{type:"CHANGE_SELECTORS",value:e,name:t}}(t,n))}}}))(M),W=function(){return r.a.createElement("div",null,r.a.createElement(D,null))},X=(n(241),function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(e){var a;return Object(_.a)(this,n),(a=t.call(this,e)).state={index:0,isEndGame:!1,isAnswered:!1,rightQuestions:0,clock:30,score:0},a}return Object(x.a)(n,null,[{key:"notFound",value:function(){return r.a.createElement(q.a,{to:"/"})}},{key:"setRanking",value:function(){var e=JSON.parse(localStorage.getItem("state")).player,t=e.name,n=e.score,a=e.picture,r=JSON.parse(localStorage.getItem("ranking"))||[],c={name:t,score:n,picture:a},o=[].concat(Object(L.a)(r),[c]);localStorage.setItem("ranking",JSON.stringify(o))}},{key:"renderQuestion",value:function(e,t,n){return r.a.createElement("div",{className:"questions-text"},r.a.createElement("div",{className:"questions-title"},r.a.createElement("div",null,r.a.createElement("p",{"data-testid":"question-category",className:"questions-category"},t)),r.a.createElement("p",{"data-testid":"question-text",className:"questions-phrase"},n)),r.a.createElement("p",{"data-testid":"timer",className:"questions-clock"},"Tempo: ",e))}},{key:"dataTestToAnswer",value:function(e,t,n){return e!==t?"wrong-answer-".concat(n.indexOf(e)):"correct-answer"}}]),Object(x.a)(n,[{key:"componentDidMount",value:function(){var e=Object(p.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.adjustingFetch(),this.intervalID=setInterval((function(){var e=t.state.clock;e>0&&t.setState((function(e){return{clock:e.clock-1}})),0===e&&(clearInterval(t.clockTimer),t.setState((function(){return{isAnswered:!0}})))}),1e3);case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"adjustingFetch",value:function(){var e=this.props,t=e.getQuestions,n=e.categorie,a=e.difficulty,r=e.type,c=n?"&category=".concat(n):"",o=a?"&difficulty=".concat(a):"",i=r?"&type=".concat(r):"",s="&token=".concat(localStorage.getItem("token"));null===localStorage.getItem("token")&&(s=""),t(c,o,i,s)}},{key:"changeIndex",value:function(){this.state.index<4&&this.setState({index:this.state.index+1,isAnswered:!1,clock:30}),4===this.state.index&&(this.setState({isEndGame:!0}),n.setRanking())}},{key:"validAnswer",value:function(e,t){var n=this,a=this.props.changeScore,r=t.correct_answer,c=10+function(e){switch(e){case"easy":return 1;case"medium":return 2;case"hard":return 3;default:return""}}(t.difficulty)*this.state.clock;if(e===r){this.setState((function(){return{rightQuestions:n.state.rightQuestions+1,score:n.state.score+c}}));var o=JSON.parse(localStorage.getItem("state"));o.player.assertions+=1,o.player.score+=c,localStorage.setItem("state",JSON.stringify(o)),a(c)}this.setState({isAnswered:!0})}},{key:"classNameToButton",value:function(e,t){return this.state.isAnswered?e===t?"btn-green":"btn-red":"btn-grey"}},{key:"buttonNext",value:function(){var e=this,t=this.state.isAnswered;return r.a.createElement("button",{type:"button",className:"btn-next",hidden:!t,"data-testid":"btn-next",onClick:function(){return e.changeIndex()}},"PR\xd3XIMA")}},{key:"render",value:function(){var e=this,t=this.state,a=t.index,c=t.isEndGame,o=t.clock,i=this.props,s=i.results,u=i.responseCode;if(i.isFetching||1===u)return r.a.createElement("div",null,"Loading...");if(3===u)return n.notFound();var l=function(e,t){return e?[].concat(Object(L.a)(e[t].incorrect_answers),[e[t].correct_answer]):""}(s,a);return c?r.a.createElement(q.a,{to:"/feedback"}):r.a.createElement("div",{className:"questions-container"},n.renderQuestion(o,s[a].category,s[a].question),r.a.createElement("div",{className:"questions-buttons"},l.sort().map((function(t){return r.a.createElement("button",{className:e.classNameToButton(t,s[a].correct_answer),"data-testid":n.dataTestToAnswer(t,s[a].correct_answer,l),key:t,disabled:e.state.isAnswered,type:"button",onClick:function(){return e.validAnswer(t,s[a])}}," ",t)})),this.buttonNext()))}}]),n}(a.Component));X.defaultProps={results:[],responseCode:1};var $=Object(c.b)((function(e){var t=e.selectorsChange,n=t.categorie,a=t.difficulty,r=t.type,c=e.questionsReducer;return{results:c.results,categorie:n,difficulty:a,type:r,responseCode:c.responseCode,isFetching:c.isFetching}}),(function(e){return{getQuestions:function(t,n,a,r){return e(v(t,n,a,r))},changeScore:function(t){return e(E(t))}}}))(X),z=(n(242),function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=(JSON.parse(localStorage.getItem("state"))||[]).player||"",t=e.name,n=e.picture,a=e.score;return r.a.createElement("div",{className:"Header_father"},r.a.createElement("div",{className:"Header_image-and-name"},r.a.createElement("img",{"data-testid":"header-profile-picture",className:"Header_player-image",alt:"".concat(t," player gravatar"),src:n}),r.a.createElement("p",{"data-testid":"header-player-name",className:"Header_player-name"},"Jogador: ",t||"")),r.a.createElement("div",{className:"Header_score"},r.a.createElement("p",{"data-testid":"header-score",className:"Header_score-text"},"Pontos: ",a),window.location.href.includes("feedback")?r.a.createElement(H,null):""))}}]),n}(r.a.Component)),K=Object(c.b)((function(e){return{storeScore:e.scoreChangeReducer.score}}))(z),Y=function(){return r.a.createElement("div",null,r.a.createElement(K,null),r.a.createElement($,null))},Z=(n(119),Object(c.b)(null,(function(e){return{changeScore:function(t){return e(E(t))}}}))((function(e){var t=e.buttonName,n=e.changeScore;return r.a.createElement(F.c,{to:"/ranking"},r.a.createElement("button",{className:"Button_ranking",onClick:function(){return function(e){e(-1*JSON.parse(localStorage.getItem("state")).player.score)}(n)},type:"button"},t))}))),ee=Object(c.b)(null,(function(e){return{changeScore:function(t){return e(E(t))}}}))((function(e){var t=e.buttonName,n=e.changeScore;return r.a.createElement(F.c,{to:"/"},r.a.createElement("button",{onClick:function(){return function(e){var t=JSON.parse(localStorage.getItem("state")),n=-1*t.player.score;t.player.assertions=0,t.player.score=0,localStorage.setItem("state",JSON.stringify(t)),e(n)}(n)},className:"Button_play-again",type:"button"},t))})),te=(n(243),function(){var e=(JSON.parse(localStorage.getItem("state"))||{player:{name:"",assertions:0,score:0,gravatarEmail:"",picture:""}}).player,t=e.assertions,n=e.score,a=t>=3?"Mandou bem!":"Podia ser melhor...";return r.a.createElement("div",null,r.a.createElement(K,null),r.a.createElement("div",{className:"Feedback_father-div"},r.a.createElement("h1",{"data-testid":"feedback-text"},a),r.a.createElement("p",{"data-testid":"feedback-total-question"},"Voc\xea acertou ",t," quest\xf5es!"),r.a.createElement("p",{"data-testid":"feedback-total-score"},"Um total de ",n," pontos"),r.a.createElement(Z,{buttonName:"Ver Ranking"}),r.a.createElement(ee,{buttonName:"Jogar Novamente"})))}),ne=(n(244),function(){var e=JSON.parse(localStorage.getItem("ranking"))||[];return e.sort((function(e,t){return e.score>t.score?-1:e.score<t.score?1:0})),r.a.createElement("div",{className:"Ranking_father"},r.a.createElement("h1",{className:"ranking-title"},"Ranking"),e.map((function(e,t){var n=e.name,a=e.score,c=e.picture,o=t+1;return r.a.createElement("div",{className:"ranking-item",key:"".concat(n,"-").concat(a)},function(e,t){return r.a.createElement("img",{"data-testid":"profile-picture-".concat(t),className:"ranking-img",src:e,alt:"Player pictures"})}(c,o),r.a.createElement("span",{"data-testid":"".concat(n,"-").concat(o),className:"ranking-text"},n," - ",a," pontos"))})),r.a.createElement(F.c,{to:"/"},r.a.createElement("button",{"data-testid":"btn-go-home",className:"Button_home"},"Voltar ao in\xedcio")))}),ae=(n(245),function(e){Object(R.a)(n,e);var t=Object(A.a)(n);function n(){return Object(_.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return r.a.createElement(F.a,null,r.a.createElement(F.b,{basename:"/trivia-react-redux/"},r.a.createElement(q.d,null,r.a.createElement(q.b,{exact:!0,path:"/",component:B}),r.a.createElement(q.b,{path:"/settings",component:W}),r.a.createElement(q.b,{path:"/game",component:Y}),r.a.createElement(q.b,{path:"/feedback",component:te}),r.a.createElement(q.b,{path:"/ranking",component:ne}))))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(c.a,{store:I},r.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[123,1,2]]]);
//# sourceMappingURL=main.4cbb51e4.chunk.js.map